# Info
This version uses Material design web component, becasue Fatzebra requires minimum or no specific JS framework dependencies other than jQuery.
https://material-components.github.io/material-components-web-catalog/#/component/text-field

The MDC uses es6/sass style morden web components standard with web pack as building system. The build out put is pure HTML/CSS/JS in asserts folder.

## Run
npm start

## Build
npm run build

## Changes
### folder structure
`assets`
application.css copied from original hosted web page
application.js copied from original hosted web page
card-mastercard/visa/transact-xxxx.svg copied from original hosted web page

bundle.js generated by our new webpack build output
style-bundle.css generated by our new webpack build output

`js`

index.js material design web components entry point, es6 style

`scss`
style.scss new style, also included some old style overwrite

### Validation wire up
Exisiting validation uses https://jqueryvalidation.org/documentation/

Customized validation method is added via below style in application.js, build output from Fatzebra's existing system
```
jQuery.validator.addMethod('card-type'
```

Some input has Data mask plugin
https://github.com/digitalBush/jquery.maskedinput

The validation on Card Number input is an working example, once validation set invalid = false, the MDC error style should be triggered.

Expiry and CVV fields seems to have something tricky happens. After customized validation invalid the element, somewhere the invalid will be set to true again.

e.g.
Expiry input has class="expiry-date", which will add a validation method in jQuery.Validator
```
jQuery.validator.addMethod('expiry-date', function(value, element) {
```

Inside that function, we will call removeErrorValidationStyleForExpiry() first
Then, depends on valid result to call addErrorValidationStyleForExpiry()

```
var isValid = validExp(parts[0], parts[1]);
  if (!isValid) {
    addErrorValidationStyleForExpiry();
  }

return true;
```

I think this might be reset by jQuery validation rules afterwards
```
  jQuery("form").validate({
    ignore: ':hidden',
    rules: {
      'payment_request[card_holder]': {
        required: true,
        normalizer: function(value) {
          return $.trim(value);
        }
      },
      'payment_request[expiry_date]': {
        required: true,
        'expiry-date': true,
        normalizer: formatExpiryDate
      }
    },
```
